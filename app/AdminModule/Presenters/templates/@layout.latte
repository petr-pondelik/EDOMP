<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>
        {ifset headingFirst}
            {include headingFirst|stripHtml}
            {ifset headingSecond}
                - {include headingSecond}
            {/ifset} |
        {/ifset}
        EDOMP
    </title>
    <link rel="stylesheet" type="text/css" href="{$basePath}/dist/app.bundle.css">
</head>

<body>

{if $user->isInRole("admin") || $user->isInRole("teacher")}
    {control sideBar}
    {control headerBar}
{/if}

<main id="content" class="mt-2">

    {if $presenter->name !== 'Admin:Sign'}
        {control sectionHelpModal}
    {/if}

    {if $user->isInRole("admin") || $user->isInRole("teacher")}

        {if !$newtonApiConnection}
            <div class="flash alert alert-danger border-0 alert-dismissible fade show ml-4 mr-4 mt-4 mb-4 border-0" id="newton-unreachable" role="alert">
                <p class="mb-0"><i class="fas fa-exclamation-triangle mr-2"></i>NewtonAPI je nedostupn√©.</p>
            </div>
        {/if}

        {if !$presenter->isLinkCurrent('Homepage:*')}
            <nav class="ml-4 mr-4 mt-3 {ifset isEdit}breadcrumb-edit{/ifset}"
                 id="breadcrumb-navigation" aria-label="breadcrumb">
                <ol class="mb-0 pt-1 pb-1 breadcrumb bg-light">
                    <li class="breadcrumb-item"><a n:href="Homepage:default"><i class="fas fa-home"></i></a></li>
                    {ifset headingFirstLink}
                        {include headingFirstLink}
                    {/ifset}
                    {ifset headingSecondLink}
                        {include headingSecondLink}
                    {/ifset}
                    {ifset headingThirdLink}
                        {include headingThirdLink}
                    {/ifset}
                </ol>
            </nav>
        {/if}

        <div class="ml-4 mr-4 mt-4">
            <div class="card card-shadow border-light">
                {ifset content}
                    {include content}
                {/ifset}
            </div>
        </div>

        {ifset create}
            {include create}
        {/ifset}

    {else}

        {ifset sign}
            {include sign}
        {/ifset}

    {/if}

</main>

<script src="{$basePath}/dist/app.bundle.js"></script>

<!-- MathJax Library -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML'></script>

<!-- MathJax Config and Renderer function -->
{snippet mathJaxRender}
    <script type="text/javascript">
        function ready(callback){
            // in case the document is already rendered
            if (document.readyState !== 'loading'){
                callback();
            }
            // modern browsers
            else if (document.addEventListener){
                document.addEventListener('DOMContentLoaded', callback);
            }
            // IE <= 8
            else document.attachEvent('onreadystatechange', function(){
                    if(document.readyState === 'complete'){
                        callback();
                    }
            });
        }

        function mathJaxRenderer() {
            ready(function() {
                console.log('MATHJAX RENDER');
                MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
                MathJax.Hub.Config({
                    messageStyle: "none",
                    ignoreClass: "tex2jax_ignore"
                });
            });
        }
        setTimeout(mathJaxRenderer, 1000);
    </script>
{/snippet}

</body>
</html>